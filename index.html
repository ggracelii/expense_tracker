<script>
  const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwV1KyUWGYKY9xlG2Mnk9MJ-Msvc4xounWa20HGrJgMqfQ5D-xKhmeagEWnkuKinsfyvA/exec";

  document.getElementById("expenseForm").addEventListener("submit", async (e) => {
    e.preventDefault();

    const titleInput = document.getElementById("title");
    const amountInput = document.getElementById("amount");
    const categorySelect = document.getElementById("category");

    const title = titleInput.value.trim();
    const amount = parseFloat(amountInput.value);
    const category = categorySelect.value;

    if (!title || isNaN(amount) || !category) return;

    const data = { title, amount, category };

    try {
      await fetch(SCRIPT_URL, {
        method: "POST",
        mode: "no-cors", // CORS workaround
        body: JSON.stringify(data),
        headers: { "Content-Type": "application/json" }
      });

      // Clear form fields
      titleInput.value = "";
      amountInput.value = "";
      categorySelect.value = "";

      // Refresh UI (even if response can't be read due to no-cors)
      loadExpenses();
    } catch (err) {
      alert("Error submitting expense.");
      console.error(err);
    }
  });
</script>
